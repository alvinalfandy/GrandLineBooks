@model GrandLineBooks.Models.Order
@{
    ViewData["Title"] = "Detail Pesanan Saya";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}

<div class="container py-5">
    <div class="card shadow-lg" style="background: #0a1929; border: 3px solid #2196F3; border-radius: 15px;">
        <div class="card-header"
            style="background: #0d47a1; border-bottom: 3px solid #2196F3; border-radius: 12px 12px 0 0; padding: 25px;">
            <div class="d-flex justify-content-between align-items-center">
                <h4 class="mb-0" style="color: #ffffff; font-weight: bold; font-size: 24px;">
                    <i class="fas fa-receipt"></i> Detail Pesanan #@Model.Id.Substring(0, 8)
                </h4>
                <a asp-action="MyOrders" class="btn btn-outline-light btn-lg" style="font-weight: bold;">
                    <i class="fas fa-arrow-left"></i> Kembali
                </a>
            </div>
        </div>

        <div class="card-body" style="padding: 35px; background: #0a1929;">
            <div class="row mb-4">
                <div class="col-md-6">
                    <h5
                        style="color: #64B5F6; font-weight: bold; margin-bottom: 20px; border-bottom: 3px solid #2196F3; padding-bottom: 10px; font-size: 20px;">
                        <i class="fas fa-info-circle"></i> Informasi Pesanan
                    </h5>
                    <div style="background: #0d47a1; border: 3px solid #2196F3; border-radius: 12px; padding: 25px;">
                        <table style="width: 100%;">
                            <tr style="margin-bottom: 15px;">
                                <td width="120"
                                    style="color: #64B5F6; font-weight: bold; font-size: 15px; padding: 10px 0;">Order
                                    ID:</td>
                                <td style="color: #ffffff; font-weight: 500; font-size: 15px; padding: 10px 0;">
                                    #@Model.Id</td>
                            </tr>
                            <tr style="margin-bottom: 15px;">
                                <td style="color: #64B5F6; font-weight: bold; font-size: 15px; padding: 10px 0;">
                                    Tanggal:</td>
                                <td style="color: #ffffff; font-weight: 500; font-size: 15px; padding: 10px 0;">
                                    @Model.OrderDate.ToString("dd MMMM yyyy HH:mm")</td>
                            </tr>
                            <tr style="margin-bottom: 15px;">
                                <td style="color: #64B5F6; font-weight: bold; font-size: 15px; padding: 10px 0;">Status:
                                </td>
                                <td style="padding: 10px 0;">
                                    @if (Model.Status == "Pending")
                                    {
                                        <span class="badge bg-warning text-dark"
                                            style="font-size: 16px; padding: 8px 18px; font-weight: bold;">Pending</span>
                                    }
                                    else if (Model.Status == "Processing")
                                    {
                                        <span class="badge bg-info text-dark"
                                            style="font-size: 16px; padding: 8px 18px; font-weight: bold;">Processing</span>
                                    }
                                    else if (Model.Status == "Shipped")
                                    {
                                        <span class="badge bg-primary"
                                            style="font-size: 16px; padding: 8px 18px; font-weight: bold;">Shipped</span>
                                    }
                                    else if (Model.Status == "Delivered")
                                    {
                                        <span class="badge bg-success"
                                            style="font-size: 16px; padding: 8px 18px; font-weight: bold;">Delivered</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-danger"
                                            style="font-size: 16px; padding: 8px 18px; font-weight: bold;">Cancelled</span>
                                    }
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="col-md-6">
                    <h5
                        style="color: #64B5F6; font-weight: bold; margin-bottom: 20px; border-bottom: 3px solid #2196F3; padding-bottom: 10px; font-size: 20px;">
                        <i class="fas fa-map-marker-alt"></i> Alamat Pengiriman
                    </h5>
                    <div style="background: #0d47a1; border: 3px solid #2196F3; border-radius: 12px; padding: 25px;">
                        <p style="color: #ffffff; margin: 0; line-height: 1.8; font-size: 16px; font-weight: 500;">
                            @Model.ShippingAddress</p>
                    </div>
                </div>
            </div>

            <h5
                style="color: #64B5F6; font-weight: bold; margin-bottom: 20px; border-bottom: 3px solid #2196F3; padding-bottom: 10px; font-size: 20px;">
                <i class="fas fa-box"></i> Item Pesanan
            </h5>
            <div class="table-responsive">
                <table class="table" style="border: 3px solid #2196F3; margin-bottom: 0;">
                    <thead>
                        <tr style="background: #1976D2;">
                            <th style="color: #ffffff; font-weight: bold; font-size: 16px; padding: 18px;">Buku</th>
                            <th class="text-center"
                                style="color: #ffffff; font-weight: bold; font-size: 16px; padding: 18px;">Jumlah</th>
                            <th class="text-end"
                                style="color: #ffffff; font-weight: bold; font-size: 16px; padding: 18px;">Harga</th>
                            <th class="text-end"
                                style="color: #ffffff; font-weight: bold; font-size: 16px; padding: 18px;">Subtotal</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Items != null && Model.Items.Count > 0)
                        {
                            @foreach (var item in Model.Items)
                            {
                                <tr style="border-bottom: 2px solid #2196F3; background: #0d47a1;">
                                    <td style="color: #ffffff; font-weight: 500; font-size: 15px; padding: 20px;">
                                        @item.BookTitle</td>
                                    <td class="text-center"
                                        style="color: #ffffff; font-weight: 500; font-size: 15px; padding: 20px;">@item.Quantity
                                    </td>
                                    <td class="text-end"
                                        style="color: #ffffff; font-weight: 500; font-size: 15px; padding: 20px;">Rp
                                        @item.Price.ToString("N0")</td>
                                    <td class="text-end"
                                        style="color: #64B5F6; font-weight: bold; font-size: 17px; padding: 20px;">Rp
                                        @((item.Price * item.Quantity).ToString("N0"))</td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="4" class="text-center"
                                    style="color: #ffffff; background: #0d47a1; padding: 25px; font-size: 16px;">Tidak ada
                                    item</td>
                            </tr>
                        }
                    </tbody>
                    <tfoot>
                        <tr style="background: #1976D2; border-top: 4px solid #2196F3;">
                            <td colspan="3" class="text-end" style="padding: 25px;">
                                <h3 class="mb-0" style="color: #ffffff; font-weight: bold; font-size: 22px;">TOTAL
                                    PEMBAYARAN:</h3>
                            </td>
                            <td class="text-end" style="padding: 25px;">
                                <h2 class="mb-0"
                                    style="color: #ffffff; font-weight: bold; font-size: 30px; text-shadow: 0 0 10px rgba(33, 150, 243, 0.8);">
                                    Rp @Model.TotalAmount.ToString("N0")
                                </h2>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            @if (Model.Status == "Pending")
            {
                <div class="alert mt-4"
                    style="background: #0d47a1; border: 3px solid #17a2b8; color: #ffffff; padding: 20px; border-radius: 10px;">
                    <h5 style="color: #4fc3f7; font-weight: bold;">
                        <i class="fas fa-info-circle"></i> Menunggu Konfirmasi
                    </h5>
                    <p style="margin: 10px 0 0 0; font-size: 15px; line-height: 1.6;">
                        Pesanan Anda sedang menunggu konfirmasi. Kami akan segera memproses pesanan Anda.
                    </p>
                </div>
            }
            else if (Model.Status == "Processing")
            {
                <div class="alert mt-4"
                    style="background: #0d47a1; border: 3px solid #0d6efd; color: #ffffff; padding: 20px; border-radius: 10px;">
                    <h5 style="color: #64B5F6; font-weight: bold;">
                        <i class="fas fa-cog fa-spin"></i> Sedang Diproses
                    </h5>
                    <p style="margin: 10px 0 0 0; font-size: 15px; line-height: 1.6;">
                        Pesanan Anda sedang diproses. Kami sedang menyiapkan buku-buku Anda dengan hati-hati.
                    </p>
                </div>
            }
            else if (Model.Status == "Shipped")
            {
                <div class="alert mt-4"
                    style="background: #0d47a1; border: 3px solid #ffc107; color: #ffffff; padding: 20px; border-radius: 10px;">
                    <h5 style="color: #ffc107; font-weight: bold;">
                        <i class="fas fa-truck"></i> Dalam Pengiriman
                    </h5>
                    <p style="margin: 10px 0 0 0; font-size: 15px; line-height: 1.6;">
                        Pesanan Anda dalam pengiriman. Buku-buku Anda sedang dalam perjalanan menuju alamat Anda!
                    </p>
                </div>
            }
            else if (Model.Status == "Delivered")
            {
                <div class="alert mt-4"
                    style="background: #0d47a1; border: 3px solid #198754; color: #ffffff; padding: 20px; border-radius: 10px;">
                    <h5 style="color: #4caf50; font-weight: bold;">
                        <i class="fas fa-check-circle"></i> Pesanan Selesai
                    </h5>
                    <p style="margin: 10px 0 0 0; font-size: 15px; line-height: 1.6;">
                        Pesanan telah sampai! Terima kasih telah berbelanja di GrandLineBooks. Selamat membaca! ðŸ“š
                    </p>
                </div>
            }
            else if (Model.Status == "Cancelled")
            {
                <div class="alert mt-4"
                    style="background: #0d47a1; border: 3px solid #dc3545; color: #ffffff; padding: 20px; border-radius: 10px;">
                    <h5 style="color: #ef5350; font-weight: bold;">
                        <i class="fas fa-times-circle"></i> Pesanan Dibatalkan
                    </h5>
                    <p style="margin: 10px 0 0 0; font-size: 15px; line-height: 1.6;">
                        Pesanan telah dibatalkan. Jika ada pertanyaan, silakan hubungi customer service kami.
                    </p>
                </div>
            }
        </div>
    </div>
</div>